<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<sub-flow name="put-orderline-update-impl-sub-flow" doc:id="c3ebeab3-4ed5-464a-8962-addd4421353e" >
		<set-variable value="#['x-orderline-api']" doc:name="Set Api name" doc:id="9e889527-c942-40ae-b9b9-d50e61016e79" variableName="apiName"/>
		<set-variable value="#[vars.apiName ++ &quot;:&quot; ++ 'put-orderline-update-impl-sub-flow']" doc:name="Set Flow Name" doc:id="f880e1ee-d436-4241-8f6b-d5756f20d95d" variableName="flowName"/>
		<flow-ref doc:name="Log process entry" doc:id="500d585a-19bf-4c32-b111-96ea03a962f1" name="log-process-entry-sub-flow"/>
		<flow-ref doc:name="Audit process entry" doc:id="3be411df-1af9-41a3-a80c-6c60d2513349" name="audit-process-entry-sub-flow"/>
		<http:request method="PUT" doc:name="Invoke orderline process layer" doc:id="41630289-68cb-46bc-8af8-7d27bf3bc245" config-ref="p_order_mgmt_HTTP_Request_configuration" path="#[vars.processPath]" responseTimeout="${response.timeout}">
			<http:headers ><![CDATA[#[output application/java
---
{
	"Transaction-Id" : vars.transactionId,
	"client_secret" : p('processOrderMgmt.clientSecret'),
	"Authorization" : attributes.headers.Authorization,
	"Transaction-Start-Time" : vars.transactionStartTime,
	"client_id" : p('processOrderMgmt.clientId'),
	"ERP-Account-Number" : vars.accountNumber
}]]]></http:headers>
			<http:uri-params ><![CDATA[#[output application/java
---
{
	"erpOrderId" : vars.erpOrderId,
	"erpOrderLineId" : vars.erpOrderLineId
}]]]></http:uri-params>

	
			</http:request>
		<flow-ref doc:name="Audit process exit" doc:id="b2f77e14-1264-4506-95d6-8184f0a06df5" name="audit-process-exit-sub-flow"/>
		<flow-ref doc:name="Log process exit" doc:id="4b7d9afe-23bc-4aa3-b29f-2c3e9d384743" name="log-process-exit-sub-flow" />
	</sub-flow>
</mule>
